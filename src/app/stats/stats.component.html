<div class="statsContainer cha-dark">

    <div class="group-container">

        <div class="button-container">
            <mat-button-toggle-group #bySeason="matButtonToggleGroup" [value]="currentSeasonType" (change)="changeSeason(bySeason.value)">
                <mat-button-toggle value="Regular" color="accent">
                    Regular
                </mat-button-toggle>
                <mat-button-toggle value="Playoffs" color="accent">
                    Playoffs
                </mat-button-toggle>
            </mat-button-toggle-group>
        </div>

        <mat-tab-group color="accent" (selectedTabChange)="onTabChange($event)">

            <mat-tab label="Teams">

                <ng-container>
                    <div class="overallTeamSection">
                        <div class="header">
                            <p routerLink="league" class="link">See Details ></p>
                        </div>
                        <div class="spinner" *ngIf="isLeagueLoading">
                            <mat-spinner color="accent"></mat-spinner>
                        </div>
    
                        
                
                    </div>
    
                </ng-container>
            </mat-tab>

            <!-- **************************************** PLAYERS ************************************* -->

            <mat-tab label="Players"> 

                <ng-container>
                    <div class="overallTeamSection">
                        <div class="header">
                            <p routerLink="players" class="link">See All ></p>
                        </div>
                        <div class="spinner" *ngIf="isLeadersLoading">
                            <mat-spinner color="accent"></mat-spinner>
                        </div>
    
                        
    
                    </div>
                
                
                </ng-container>
                
            </mat-tab>

                

            <!-- **************************************** GOALIES ************************************* -->


            <mat-tab label="Goalies"> 

                <ng-container>
                    <div class="overallTeamSection">
                        <div class="header">
                            <p routerLink="goalies" class="link">See All ></p>
                        </div>
                        <div class="spinner" *ngIf="isGoaliesLoading">
                            <mat-spinner color="accent"></mat-spinner>
                        </div>
    
                        <mat-accordion multi="true" color="accent" *ngIf="!isGoaliesLoading">
    
                            <mat-expansion-panel expanded="{{expand}}">
                                <mat-expansion-panel-header>
                                    <mat-panel-title>Wins Leaders</mat-panel-title>
                                </mat-expansion-panel-header>
    
                                <div class="table">
            
                                    <table mat-table [dataSource]="goalies" class="mat-elevation-z8 full-width">
                            
                                        <ng-container matColumnDef="team_logo">
                                            <th mat-header-cell *matHeaderCellDef> Team </th>
                                            <td mat-cell *matCellDef="let goalie"> 
                                                <img src="{{ findLogo(goalie.team_name).image }}"> 
                                            </td>
                                        </ng-container>
                
                                        <ng-container matColumnDef="player_name">
                                            <th mat-header-cell *matHeaderCellDef> Name </th>
                                            <td mat-cell *matCellDef="let player"> {{player.player_name}} </td>
                                        </ng-container>
                            
                                        <ng-container matColumnDef="games_played">
                                            <th mat-header-cell *matHeaderCellDef> GP </th>
                                            <td mat-cell *matCellDef="let player"> {{player.games_played}} </td>
                                        </ng-container>
                                        
                                        <ng-container matColumnDef="wins">
                                            <th mat-header-cell *matHeaderCellDef> W </th>
                                            <td mat-cell *matCellDef="let player"> {{player.wins}} </td>
                                        </ng-container>
                                        
                                        <ng-container matColumnDef="loss">
                                            <th mat-header-cell *matHeaderCellDef> L </th>
                                            <td mat-cell *matCellDef="let player"> {{player.loss}} </td>
                                        </ng-container>
                            
                                        <ng-container matColumnDef="ties">
                                            <th mat-header-cell *matHeaderCellDef> T </th>
                                            <td mat-cell *matCellDef="let player"> {{player.ties}} </td>
                                        </ng-container>
                            
                                        <ng-container matColumnDef="save_pct">
                                            <th mat-header-cell *matHeaderCellDef> Sv% </th>
                                            <td mat-cell *matCellDef="let player"> {{player.save_pct}}% </td>
                                        </ng-container>
                                        
                                        <tr mat-header-row *matHeaderRowDef="goaliesColumnsToDisplay"></tr>
                                        <tr 
                                            mat-row 
                                            *matRowDef="let goalie; columns: goaliesColumnsToDisplay;" 
                                            (click)="openPlayer(goalie, 'goalie')"
                                        ></tr>
                            
                                    </table>
                            
                                </div>
                            </mat-expansion-panel>
    
                            <mat-expansion-panel expanded="{{expand}}">
                                <mat-expansion-panel-header>
                                    <mat-panel-title>Save Pct Leaders</mat-panel-title>
                                </mat-expansion-panel-header>
    
                                <div class="table">
            
                                    <table mat-table [dataSource]="goaliesSvPct" class="mat-elevation-z8 full-width">
                            
                                        <ng-container matColumnDef="team_logo">
                                            <th mat-header-cell *matHeaderCellDef> Team </th>
                                            <td mat-cell *matCellDef="let goalie"> 
                                                <img src="{{ findLogo(goalie.team_name).image }}"> 
                                            </td>
                                        </ng-container>
                
                                        <ng-container matColumnDef="player_name">
                                            <th mat-header-cell *matHeaderCellDef> Name </th>
                                            <td mat-cell *matCellDef="let player"> {{player.player_name}} </td>
                                        </ng-container>
        
                                        <ng-container matColumnDef="save_pct">
                                            <th mat-header-cell *matHeaderCellDef> Save Pct </th>
                                            <td mat-cell *matCellDef="let player"> {{player.save_pct}} </td>
                                        </ng-container>
                                        
                                        <tr mat-header-row *matHeaderRowDef="goaliesSvPctColumnsToDisplay"></tr>
                                        <tr 
                                            mat-row 
                                            *matRowDef="let goalie; columns: goaliesSvPctColumnsToDisplay;" 
                                            (click)="openPlayer(goalie, 'goalie')"
                                        ></tr>
                            
                                    </table>
                            
                                </div>
                            </mat-expansion-panel>
    
                            <mat-expansion-panel expanded="{{expand}}">
                                <mat-expansion-panel-header>
                                    <mat-panel-title>Shutouts Leaders</mat-panel-title>
                                </mat-expansion-panel-header>
    
                                <div class="table">
            
                                    <table mat-table [dataSource]="goaliesShutOuts" class="mat-elevation-z8 full-width">
                            
                                        <ng-container matColumnDef="team_logo">
                                            <th mat-header-cell *matHeaderCellDef> Team </th>
                                            <td mat-cell *matCellDef="let goalie"> 
                                                <img src="{{ findLogo(goalie.team_name).image }}"> 
                                            </td>
                                        </ng-container>
                
                                        <ng-container matColumnDef="player_name">
                                            <th mat-header-cell *matHeaderCellDef> Name </th>
                                            <td mat-cell *matCellDef="let player"> {{player.player_name}} </td>
                                        </ng-container>
        
                                        <ng-container matColumnDef="shutouts">
                                            <th mat-header-cell *matHeaderCellDef> SO </th>
                                            <td mat-cell *matCellDef="let player"> {{player.shutouts}} </td>
                                        </ng-container>
                                        
                                        <tr mat-header-row *matHeaderRowDef="goaliesShutOutsColumnsToDisplay"></tr>
                                        <tr 
                                            mat-row 
                                            *matRowDef="let goalie; columns: goaliesShutOutsColumnsToDisplay;" 
                                            (click)="openPlayer(goalie, 'goalie')"
                                        ></tr>
                            
                                    </table>
                            
                                </div>
    
                            </mat-expansion-panel>
                            
                        </mat-accordion>
    
                        <mat-accordion multi="true" color="accent" *ngIf="!isGoaliesLoading">
    
                            <mat-expansion-panel expanded="{{expand}}">
                                <mat-expansion-panel-header>
                                    <mat-panel-title>GAA Leaders</mat-panel-title>
                                </mat-expansion-panel-header>
    
                                <div class="table">
            
                                    <table mat-table [dataSource]="goaliesGAA" class="mat-elevation-z8 full-width">
                            
                                        <ng-container matColumnDef="team_logo">
                                            <th mat-header-cell *matHeaderCellDef> Team </th>
                                            <td mat-cell *matCellDef="let goalie"> 
                                                <img src="{{ findLogo(goalie.team_name).image }}"> 
                                            </td>
                                        </ng-container>
                
                                        <ng-container matColumnDef="player_name">
                                            <th mat-header-cell *matHeaderCellDef> Name </th>
                                            <td mat-cell *matCellDef="let player"> {{player.player_name}} </td>
                                        </ng-container>
        
                                        <ng-container matColumnDef="goals_against_avg">
                                            <th mat-header-cell *matHeaderCellDef> GAA </th>
                                            <td mat-cell *matCellDef="let player"> {{player.goals_against_avg}} </td>
                                        </ng-container>
                                        
                                        <tr mat-header-row *matHeaderRowDef="goaliesGAAColumnsToDisplay"></tr>
                                        <tr 
                                            mat-row 
                                            *matRowDef="let goalie; columns: goaliesGAAColumnsToDisplay;" 
                                            (click)="openPlayer(goalie, 'goalie')"
                                        ></tr>
                            
                                    </table>
                            
                                </div>
                            </mat-expansion-panel>
    
                            <mat-expansion-panel expanded="{{expand}}">
                                <mat-expansion-panel-header>
                                    <mat-panel-title>Shots Faced Leaders</mat-panel-title>
                                </mat-expansion-panel-header>
                                <div class="table">
            
                                    <table mat-table [dataSource]="goaliesShotsFaced" class="mat-elevation-z8 full-width">
                            
                                        <ng-container matColumnDef="team_logo">
                                            <th mat-header-cell *matHeaderCellDef> Team </th>
                                            <td mat-cell *matCellDef="let goalie"> 
                                                <img src="{{ findLogo(goalie.team_name).image }}"> 
                                            </td>
                                        </ng-container>
                
                                        <ng-container matColumnDef="player_name">
                                            <th mat-header-cell *matHeaderCellDef> Name </th>
                                            <td mat-cell *matCellDef="let player"> {{player.player_name}} </td>
                                        </ng-container>
        
                                        <ng-container matColumnDef="shots_for">
                                            <th mat-header-cell *matHeaderCellDef> Shots Faced </th>
                                            <td mat-cell *matCellDef="let player"> {{player.shots_for}} </td>
                                        </ng-container>
                                        
                                        <tr mat-header-row *matHeaderRowDef="goaliesShotsFacedColumnsToDisplay"></tr>
                                        <tr 
                                            mat-row 
                                            *matRowDef="let goalie; columns: goaliesShotsFacedColumnsToDisplay;" 
                                            (click)="openPlayer(goalie, 'goalie')"
                                        ></tr>
                            
                                    </table>
                            
                                </div>
                            </mat-expansion-panel>
    
                        </mat-accordion>
                        
                    </div>
                </ng-container>
                
            </mat-tab>

        </mat-tab-group>

    </div>

</div>
