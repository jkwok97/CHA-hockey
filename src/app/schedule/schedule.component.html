<div class="container">

    <!-- <div class="frame" [ngClass]="{'frame': !isMobile, 'mobile-frame': isMobile}">
        <iframe [src]="schedulePage" class="iframe"></iframe>
    </div> -->

    <div class="button-container">
        <mat-button-toggle-group #bySeason="matButtonToggleGroup" [value]="scheduleType" (change)="changeSchedule(bySeason.value)">
            <mat-button-toggle value="prev" color="accent">
                << Prev
            </mat-button-toggle>
            <mat-button-toggle value="day" color="accent">
                Day
            </mat-button-toggle>
            <mat-button-toggle value="next" color="accent">
                Next >>
            </mat-button-toggle>
            <mat-button-toggle value="all" color="accent">
                All
            </mat-button-toggle>
        </mat-button-toggle-group>
    </div>

    <div class="spinner" *ngIf="isLoading">
        <mat-spinner color="accent"></mat-spinner>
    </div>

    <div class="games-container" *ngIf="!isLoading && !showAll">
        <div class="day-container" *ngFor="let day of days">
            <div class="day-header">
                Day {{day.day}}
            </div>
            <div *ngFor="let game of day.games[0]" [ngClass]="{'matchup-container': !isMobile, 'matchup-mobile': isMobile}">
                <div [ngClass]="{'team': !isMobile, 'team-mobile': isMobile}">
                    <img src="{{ findLogo(game.vis_team_name).image }}">
                    <p class="team-name" *ngIf="!isMobile">{{ findLogo(game.vis_team_name).name }}</p>
                    <p class="stat" *ngIf="game.vis_team_stats">
                        Record: {{game.vis_team_stats.wins}}-{{game.vis_team_stats.loss}}-{{game.vis_team_stats.ties}}
                    </p>
                    <p class="stat">
                        Vs. {{ game.home_team_name | titlecase }}: {{game.vis_team_wins}}-{{game.vis_team_loss}}-{{game.vis_team_ties}}
                    </p>
                    <p class="stat">
                        Last 5:
                        <mat-icon 
                            *ngFor="let record of game.vis_team_last_five" 
                            [ngClass]="{'win': record.result == 'win', 'loss': record.result == 'loss', 'tie': record.result == 'tie'}"
                        >
                            lens
                        </mat-icon>
                    </p>
                </div>

                <div class="versus">
                    <!-- <p class="stat">{{game.vis_team_name}}: {{game.vis_team_wins}}</p> -->
                    <p>@</p>
                    <p class="stat" *ngIf="game.vis_team_score && game.home_team_score">
                        Result: {{game.vis_team_score}} - {{game.home_team_score}}
                    </p>
                </div>
                
                <div [ngClass]="{'team': !isMobile, 'team-mobile': isMobile}">
                    <img src="{{ findLogo(game.home_team_name).image }}">
                    <p class="team-name" *ngIf="!isMobile">{{ findLogo(game.home_team_name).name }}</p>
                    <p class="stat" *ngIf="game.home_team_stats">
                        Record: {{game.home_team_stats.wins}}-{{game.home_team_stats.loss}}-{{game.home_team_stats.ties}}
                    </p>
                    <p class="stat">
                        Vs. {{ game.vis_team_name | titlecase }}: {{game.vis_team_loss}}-{{game.vis_team_wins}}-{{game.vis_team_ties}}
                    </p>
                    <p class="stat">
                        Last 5:
                        <mat-icon 
                            *ngFor="let record of game.home_team_last_five" 
                            [ngClass]="{'win': record.result == 'win', 'loss': record.result == 'loss', 'tie': record.result == 'tie'}"
                        >
                            lens
                        </mat-icon>
                    </p>
                </div>
                
            </div>
        </div>
    </div>

    <div class="salary-container" *ngIf="!isLoading && showAll">

        <div class="tableHeader">
            <p>{{currentSeason}} Schedule</p>
        </div>
    
        <mat-form-field color="accent" class="filtering">
            <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Search">
            <mat-hint align="start">Game Day or Team Abbr. (ex. OAK)</mat-hint>
        </mat-form-field>

        <div [ngClass]="{'table': !isMobile, 'tableMobile': isMobile}">
            
            <table mat-table [dataSource]="allSchedule" matSort class="mat-elevation-z8 full-width" matSortActive="game_day" matSortDirection="asc">

                <ng-container matColumnDef="game_day">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Day </th>
                    <td mat-cell *matCellDef="let day"> {{day.game_day}} </td>
                </ng-container>
    
                <ng-container matColumnDef="vis_team">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Visitor </th>
                    <td mat-cell *matCellDef="let day"> 
                        <img src="{{ findLogo(day.vis_team_name).image }}"> 
                    </td>
                </ng-container>

                <ng-container matColumnDef="vis_team_name">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Team Name </th>
                    <td mat-cell *matCellDef="let day"> 
                        {{ findLogo(day.vis_team_name).name }}
                    </td>
                </ng-container>

                <ng-container matColumnDef="vis_team_score">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Score </th>
                    <td mat-cell *matCellDef="let day">{{day.vis_team_score}}</td>
                </ng-container>

                <ng-container matColumnDef="versus">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Versus </th>
                    <td mat-cell *matCellDef="let day">@</td>
                </ng-container>

                <ng-container matColumnDef="home_team">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Home </th>
                    <td mat-cell *matCellDef="let day">
                        <img src="{{ findLogo(day.home_team_name).image }}">
                    </td>
                </ng-container>

                <ng-container matColumnDef="home_team_name">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Team Name </th>
                    <td mat-cell *matCellDef="let day"> 
                        {{ findLogo(day.home_team_name).name }}
                    </td>
                </ng-container>

                <ng-container matColumnDef="home_team_score">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Score </th>
                    <td mat-cell *matCellDef="let day">{{day.home_team_score}}</td>
                </ng-container>

                <ng-container matColumnDef="result">
                    <th mat-header-cell *matHeaderCellDef mat-sort-header> Results </th>
                    <td mat-cell *matCellDef="let day">{{day.vis_team_score}} - {{day.home_team_score}}</td>
                </ng-container>
    
                <tr mat-header-row *matHeaderRowDef="isMobile ? mobileAllScheduleColumnsToDisplay: allScheduleColumnsToDisplay"></tr>
                <tr 
                    mat-row 
                    *matRowDef="let day; columns: isMobile ? mobileAllScheduleColumnsToDisplay: allScheduleColumnsToDisplay;"
                ></tr>
    
            </table>

            <mat-paginator
            [pageSizeOptions]="[10]"
            [pageSize]="pageSize"
            [length]="length"
            color="accent"
            showFirstLastButtons
         ></mat-paginator>
    
        </div>

    </div>

</div>



